
<%= states = @request.state_histories.map { |sh| sh.state } %>
<div class="background_table">
  <div class="title">Current Status</div>
  <div style="clear: both;"></div>
  <div class="brow"></div>
  <div class="brow_border"></div>
  <div class="brow"></div>
</div>

<div class="overlay">
  <div class="row1">
    <div class="title2"><%=@request.provider.name%></div>
    <div class="spacer">&nbsp;</div>
    <div class="title2"><%=@request.transfer_center.name %></div>
    <div style="clear:both;"></div>
    <% if false %>
    <% if states.include?("new_request") %>
      <div class="window back_blue" id="new_request">New Request Created</div>
    <% else %>
      <div class="window" id="new_request">New Request Created</div>
    <% end %>
    <% end %>
    <div class="component vertical_icon"><i class="icon-arrow-right"></i></div>
    <% if states.include?("request_submitted") %>
      <div class="window back_blue" id="new_request_submitted">Submitted Request</div>
    <% else %>
      <div class="window" id="new_request_submitted">Submitted Request</div>
    <% end %>
    <div class="component vertical_icon"><i class="icon-arrow-right"></i></div>
    <% if states.include?("request_submitted") %>
      <div class="window back_orange" id="reviewing_request">Reviewing Request</div>
    <% else %>
      <div class="window" id="reviewing_request">Reviewing Request</div>
    <% end %>
    <div style="clear: both;"></div>
    <div class="horizontal_icon_last"><i class="icon-arrow-down"></i></div>
  </div>
  <div class="row2">
    <div class="window" id="reviewing_updated_availability">Reviewing Updated Availability</div>
    <div class="component vertical_icon"><i class="icon-arrow-left"></i></div>
    <div class="window" id="reviewing_updated_availability">Reviewing Updated Availability</div>
    <div class="component vertical_icon"><i class="icon-arrow-left"></i></div>
    <div class="window" id="submitted_updated_availability">Submited Updated Availability</div>
    <!--div class="window" id="updated_availability">Availability Updated</div-->
    <div style="clear: both;"></div>
    <div class="horizontal_icon_first"><i class="icon-arrow-down"></i></div>
  </div>
  <div class="row3">
    <div class="window" id="approved_availabilty">Approved Availability</div>
    <div class="component vertical_icon"><i class="icon-arrow-right"></i></div>
    <div class="window" id="declined_availability" style="display: none;">Declined Availability</div>
    <div class=" window" id="reviewing_approved_availability">Reviewing Approved Availability</div>
    <div class="component vertical_icon"><i class="icon-arrow-right"></i></div>
    <div class="window" id="confirmed">Confirmed</div>
    <div class="window" id="canceled" style="display: none;">Canceled</div>
    <div style="clear: both;"></div>
  </div>
</div>
