<div class="row">
  <div class="span12">
    <div class="row-fluid">
      <div class="span12" style="text-align: center;">
        <h3>Active Requests</h3>
        <%= link_to 'New Request', new_request_path %>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span5">
        <table class="table table-striped">
          <thead>
            <th>Action to Do</th>
          </thead>
          <tbody>
            <% state = "new_request" %>
            <%= render :partial => "index_categories", :locals => { :side => "provider", 
                                                                    :label_type => "warning", 
                                                                    :state_name => state, 
                                                                    :requests => @requests.select { |req| req.aasm_state.to_s == state } } %>

            <% state = "availability_submitted" %>
            <%= render :partial => "index_categories", :locals => { :side => "provider", 
                                                                    :label_type => "warning", 
                                                                    :state_name => state, 
                                                                    :requests => @requests.select { |req| req.aasm_state.to_s == state } } %>
          </tbody>
        </table>
      </div>
      <div class="span5 offset1">
        <table class="table table-striped">
          <thead>
            <th>Awaiting for Reponse</th>
          </thead>
          <tbody>
            <% state = "request_submitted" %>
            <%= render :partial => "index_categories", :locals => { :side => "provider", 
                                                                    :label_type => "info",
                                                                    :state_name => state, 
                                                                    :requests => @requests.select { |req| req.aasm_state.to_s == state } } %>
            <% state = "availability_approved" %>
            <%= render :partial => "index_categories", :locals => { :side => "provider", 
                                                                    :label_type => "info",
                                                                    :state_name => state, 
                                                                    :requests => @requests.select { |req| req.aasm_state.to_s == state } } %>

          </tbody>
        <table>
      </div>
    </div>








<% if false %>
<div class="row">
  <div class="span12">
    <div class="row-fluid">
      <div class="span12" style="text-align: center">
        <h3>Active Requests</h3>
        <%= link_to 'New Request', new_request_path %>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span5">
        <h4>1) New Requests</h4>
        <hr>
        <% state = :new_request %>
        <%= render :partial => "index_categories", :locals => {:state_name => state, :requests => Request.where(:aasm_state => state, :practice_id => current_user.practice.id)} %>
      </div>
      <div class="span5 offset1">
        <h4>2) Submited Requests</h4> 
        <hr>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span5">
        <h4>3) Availability Received</h4>
        <hr>
      </div>
      <div class="span5 offset1">
        <h4>4) Availability Confirmed</h4>
        <hr>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span5">
      <h4>5) Reservation Confirmed</h4>
        <hr>
      </div>
    </div>
  </div>
</div>
<div class="row"></div>
<div class="row">
  <div class="span12">
    <div class="row-fluid">
      <div class="span12" style="text-align: center">
        <h3>Archived Requests</h3>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span5">
        <h4>Confirmed Requests</h4>
        <hr>
        <ul class="thumbnails">
          <li class="span4-fluid">
            <div class="thumbnail">
              hi
            </div>
          </li>
        </ul>
      </div>
      <div class="span5 offset1">
        <h4>Canceled Requests</h4>
        <hr>
        <ul class="thumbnails">
          <li class="span4-fluid">
            <div class="thumbnail">
              hi
            </div>
          </li>
        </ul>
      </div>


<% if false %>
  <% [:new_request].each do |state| %>
    <%= render :partial => "index_categories", :locals => {:state_name => state, :requests => Request.where(:aasm_state => state, :practice_id => current_user.practice.id)} %>
  <% end %>
<% end %>

<% end %>
